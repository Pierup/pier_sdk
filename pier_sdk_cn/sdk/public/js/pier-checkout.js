!function(t,e){var r,a,n,o,i,d,s,p,l,m,c,f,h,g,b={hostName:"http://pierup.asuscomm.com:8686",regCode:"/sdk_register_cn/v1/register/activation_code",regUser:"/sdk_register_cn/v1/register/register_user",setPin:"/sdk_register_cn/v1/register/forget_payment_password_reset",signIn:"/sdk_register_cn/v1/register/signin",bindCard:"/payment_api/bind_card",verifyCard:"/payment_api/verify_card?platform=1",express:{prepay:"/payment_api/prepay_by_card?platform=1",payByCard:"/payment_api/pay_by_card?platform=1"},savePaymentOrder:"/payment_api/save_payment_order?platform=1",applyCredit:"/sdk_register_cn/v1/credit/apply_promotion_credit"},u="http://pierup.cn",R={user_id:"",session_token:"",statusBit:"",name:""},x={credit:"1",bankCard:"2",mixed:"3"},I={rightInLeftOut:"rightInLeftOut",filp:"filp"},E={env:"dev",totalAmount:0,currency:"CNY",payButtonId:"",merchantLogo:"",sdk_type:"regular",api_key:"",order_id:"",user_id:"",order_desc:"品而金融",merchant_id:"",available_time:"10080"},P=function(){return{paramError:"配置参数格式错误！",cssPrefix:"PIER-",phoneInputTip:"请输入您的手机号",exitTip:"再次点击退出支付！",pwdInputTip:"请输入您的密码",pierLogo:"http://pierup.cn/images/sdk-logo.png",title:{login:"品而金融",payment:"支付"},next:"下一步",notYetPierUser:"还不是品而用户？",regRightNow:"马上注册",pierCreditAmount:"品而金融支付金额",agreeAndRead:"我已同意并阅读",baomixieyi:"《保密授权协议》",emptyPayBtn:"未指定支付按钮的ID",sendCode:"获取验证码",reSend:"重新发送",btnLoading:'<img src="http://pierup.cn:4000/images/sdk_loading.gif" style="width:22px;height:22px;display:inline;"/>',btnLoading2:'<img src="/images/btn-loading.gif" style="width:20px;height:20px;display:inline;"/>'}}(),v={init:function(){a=e.createElement("style"),e.head.appendChild(a),r=a.sheet,r.addRul2e||(r.addRul2e=function(t,e){var a=r.cssRules.length;r.insertRule(t+"{"+e+"}",a)});var t=r,n=function(t,e){return function(){return t.apply(e,arguments)}},o=n(t.addRule,t);o(".pier-payment-btn","width:120px;height:32px;border:1px solid #ccc; cursor:pointer; overflow: hidden;"),o(".pier-payment-btn:hover","width:120px;height:32px;border:1px solid #7b37a6; cursor:pointer;"),o(".PIER-flip-container, .PIER-overlay, .PIER-flip-container *","-moz-box-sizing:border-box;-webkit-box-sizing:border-box;-ms-box-sizing:border-box;-o-box-sizing:border-box;box-sizing:border-box;"),o(".PIER-overlay","overflow:scroll;position:fixed;left:0;top:0;width:100%;height:100%;z-index:100;background:#000;/*visibility:hidden;*/opacity:0.4;font-family: 'Microsoft YaHei', Arial, SimHei;"),o(".PIER-panel-head, .PIER-overlay img, .PIER-overlay table, .PIER-overlay table td, .PIER-login-body, .PIER-comm-input, .PIER-payment-body","margin:0px;height: 0px;"),o(".PIER-flip-wrap","overflow:scroll;position:fixed;left:0;top:0;width:100%;height:100%;z-index:888;"),o(".PIER-flip-container","-webkit-perspective:1000;-moz-perspective:1000;-ms-perspective:1000;perspective:1000;-webkit-transform:perspective(1000px);-ms-transform:perspective(1000px);-moz-transform:perspective(1000px);transform:perspective(1000px);-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;transform-style:preserve-3d;margin:0 auto;margin-top:10%;width:460px;height:auto;"),o(".PIER-reg-container-back","-webkit-transform:rotateY(0)!important;-moz-transform:rotateY(0)!important;-o-transform:rotateY(0)!important;-ms-transform:rotateY(0)!important;transform:rotateY(0)!important;opacity:1!important;z-index:10;"),o(".PIER-login-container-back","-webkit-transform:rotateY(180deg)!important;-moz-transform:rotateY(180deg)!important;-o-transform:rotateY(180deg)!important;-ms-transform:rotateY(180deg)!important;transform:rotateY(180deg)!important;opacity:0;"),o(".PIER-login-container, .PIER-reg-container","-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;-ms-backface-visibility:hidden;-o-backface-visibility:hidden;backface-visibility:hidden;-webkit-transition:.6s;-webkit-transform-style:preserve-3d;-moz-transition:.6s;-moz-transform-style:preserve-3d;-o-transition:.6s;-o-transform-style:preserve-3d;-ms-transition:.6s;-ms-transform-style:preserve-3d;transition:.6s;transform-style:preserve-3d;position:absolute;top:0;left:0"),o(".PIER-login-container","-webkit-transform:rotateY(0);-moz-transform:rotateY(0);-ms-transform:rotateY(0);-o-transform:rotateY(0);transform:rotateY(0);z-index:2;width:460px;height:auto;-moz-border-radius:6px;-webkit-border-radius:6px;-ms-border-radius:6px;-o-border-radius:6px;border-radius:6px;-moz-box-shadow:0 0 2px #a0a0a0;-webkit-box-shadow:0 0 2px #a0a0a0;-ms-box-shadow:0 0 2px #a0a0a0;-o-box-shadow:0 0 2px #a0a0a0;box-shadow:0 0 2px #a0a0a0;background:#f5f5f5;"),o(".PIER-payment-container, .PIER-apply-container","-webkit-transform:rotateY(0);-ms-transform:rotateY(0);width:460px;height:auto;-moz-border-radius:6px;-webkit-border-radius:6px;-ms-border-radius:6px;-o-border-radius:6px;border-radius:6px;-moz-box-shadow:0 0 2px #a0a0a0;-webkit-box-shadow:0 0 2px #a0a0a0;-ms-box-shadow:0 0 2px #a0a0a0;-o-box-shadow:0 0 2px #a0a0a0;box-shadow:0 0 2px #a0a0a0;background:#f5f5f5;z-index:222;display:none;"),o(".PIER-payresult-container, .PIER-applyresult-container","-webkit-transform:rotateY(0);-ms-transform:rotateY(0);width:460px;height:auto;-moz-border-radius:6px;-webkit-border-radius:6px;-ms-border-radius:6px;-o-border-radius:6px;border-radius:6px;-moz-box-shadow:0 0 2px #a0a0a0;-webkit-box-shadow:0 0 2px #a0a0a0;-ms-box-shadow:0 0 2px #a0a0a0;-o-box-shadow:0 0 2px #a0a0a0;box-shadow:0 0 2px #a0a0a0;background:#f5f5f5;z-index:4;display:none;"),o(".PIER-reg-container","-webkit-transform:rotateY(-180deg);-moz-transform:rotateY(-180deg);-o-transform:rotateY(-180deg);-ms-transform:rotateY(-180deg);transform:rotateY(-180deg);width:460px;height:auto;-moz-border-radius:6px;-webkit-border-radius:6px;-ms-border-radius:6px;-o-border-radius:6px;border-radius:6px;-moz-box-shadow:0 0 2px #a0a0a0;-webkit-box-shadow:0 0 2px #a0a0a0;-ms-box-shadow:0 0 2px #a0a0a0;-o-box-shadow:0 0 2px #a0a0a0;box-shadow:0 0 2px #a0a0a0;background:#f5f5f5;opacity:0;"),o(".PIER-payresult-body","padding-bottom: 40px;"),o(".PIER-payresult-body img","width: 90px;height: 90px;"),o(".PIER-panel-head",'text-align:center;width:100%;height:80px;border-top-right-radius:6px;border-top-left-radius:6px;filter:progid: DXImageTransform.Microsoft.gradient(startColorstr = "rgb(245,245,245)", endColorstr = "rgb(235,235,237)");-ms-filter:progid: DXImageTransform.Microsoft.gradient(startColorstr = "rgb(245,245,245)", endColorstr = "rgb(235,235,237)");background-image:-moz-linear-gradient(top,#f5f5f5,#ebebed);background-image:-ms-linear-gradient(top,#f5f5f5,#ebebed);background-image:-o-linear-gradient(top,#f5f5f5,#ebebed);background-image:-webkit-gradient(linear,center top,center bottom,from(#f5f5f5),to(#ebebed));background-image:-webkit-linear-gradient(top,#f5f5f5,#ebebed);background-image:linear-gradient(top,#f5f5f5,#ebebed);-moz-background-clip:padding;-webkit-background-clip:padding-box;background-clip:padding-box;border-bottom:0;border-bottom:1px solid silver;background:url(/images/top-bg.png) repeat-x;'),o(".PIER-panel-head table","width: 100%;height: 75px;"),o(".PIER-panel-head table tr td:first-child","width:20%;"),o(".PIER-panel-head table tr td:nth-child(2) img","height: 56px;width: 56px;border:2px solid #fff;border-radius: 28px;"),o(".PIER-panel-head table tr td:nth-child(2) div","height:58px;width:58px;border:1px solid #c8c8c8;margin-top:-32px;border-radius:30px;display:inline-block;"),o(".PIER-panel-head table tr td:nth-child(2) h4","font-size: 16px;margin-top: -2px;letter-spacing: 2px;font-weight: lighter;"),o(".PIER-panel-head table tr td:nth-child(3)","width: 20%;"),o(".PIER-panel-head table tr td:nth-child(3) img","width:20px;height:20px;border-radius: 10px;border: 1px solid rgb(200,200,200);margin: 2px;"),o(".PIER-close","height:22px;width:22px;float:right;margin-top:-24px;margin-right:4px;cursor:pointer;background-size:100% 100%;background-image: url('data:image/png;base64,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');"),o(".PIER-login-body","height: 274px;width: 100%;border-top:1px solid #f5f5f5;"),o(".PIER-reg-body","height: 376px;width: 100%;border-top:1px solid #f5f5f5;"),o(".PIER-apply-body","height: auto;width: 100%;padding-bottom: 20px;border-top:1px solid #f5f5f5;"),o(".PIER-loading-body","height:290px;width:100%; text-align:center;padding-top:40px;background:#fff;"),o(".PIER-loading-body src","height:290px;width:100%; height:100px;width:100px;"),o(".PIER-payment-body","height: auto;width: 100%;padding-bottom: 20px;border-top:1px solid #f5f5f5;"),o(".PIER-payment-body label","font-size: 14px;"),o(".PIER-right","float: right;"),o(".PIER-row","width: 262px;margin: 0 auto;"),o(".PIER-comm-input","width:260px;height:30px;outline:0;border-radius:4px;border:1px solid #dcdcdc;padding-left:6px;"),o(".PIER-code-input","width:173px;height:30px;padding-left:6px;outline:0;border:1px solid #dcdcdc;border-top-left-radius:4px;border-bottom-left-radius:4px;float:left;display:block!important"),o(".PIER-code-label","border:1px solid #b4b4b4;font-size:12px!important;background:#b4b4b4;color:#fff;height:30px;border-top-right-radius:4px;border-bottom-right-radius:4px;padding-left:8px;padding-right:8px;margin-left:-4px;float:left;cursor:pointer;width:89px;outline:none;"),o(".PIER-clear","clear: both;"),o(".PIER-switch-btn","background:#fff;color:#7b37a6;border:1px solid #ccc;outline:0;width:90px;height:28px;display:inline-block;cursor:pointer;font-size:14px;"),o(".PIER-switch-btn.active","background: #7b37a6;color: #fff;"),o(".PIER-switch-btn.left-btn","border-top-left-radius: 4px;border-bottom-left-radius: 4px;border-right: 0px;"),o(".PIER-switch-btn.right-btn","border-top-right-radius: 4px;border-bottom-right-radius: 4px;border-left: 0px;"),o(".PIER-bank-body","height:auto;width:100%;background:#fff;border-bottom-left-radius:6px;border-bottom-right-radius:6px;"),o(".PIER-bank-body table","margin: 0 auto;height: 80px;"),o(".PIER-bank-body table img","width: 40px;height: 40px;line-height: 80px;"),o(".PIER-link-bank-panel","width:100%;transition:height .5s;-moz-transition:height .5s;-webkit-transition:height .5s;-o-transition:height .5s;height:0;overflow:hidden;"),o(".PIER-instalment-select","width: 168px;border-radius: 4px;height: 28px;outline: none;border: 1px solid rgb(220,220,220);"),o(".PIER-bankcard-select","width: 172px;border-radius: 4px;height: 28px;outline: none;border: 1px solid rgb(220,220,220);"),o(".PIER-bankcard-select span","font-size:10px;"),o(".PIER-mT-lg","margin-top: 52px;"),o(".PIER-mT-md","margin-top: 32px;"),o(".PIER-mT-sm","margin-top: 16px;"),o(".PIER-mT-xs","margin-top: 12px;"),o(".PIER-mB-sm","margin-bottom: 18px;"),o(".PIER-mB-md","margin-bottom: 36px;"),o(".PIER-h-auto","height: auto !important;"),o(".PIER-color","color: #7b37a6;"),o(".PIER-color-gray","color: rgb(180,180,180);"),o(".PIER-color-black","color:#000;"),o(".PIER-money","color: #f34949;"),o(".PIER-font-lg","font-size: 30px;"),o(".PIER-font-md","font-size: 16px;"),o(".PIER-font-sm","font-size: 12px;"),o(".PIER-font-xs","font-size: 10px;"),o(".PIER-text-center","text-align: center;"),o(".PIER-text-left","text-align: left !important;"),o(".PIER-submit-btn",'width:132px;height:28px;border-radius:4px;border:1px solid #dcdcdc;filter:progid: DXImageTransform.Microsoft.gradient(startColorstr = "rgb(255,255,255)", endColorstr = "rgb(225,225,225)");-ms-filter:progid: DXImageTransform.Microsoft.gradient(startColorstr = "rgb(255,255,255)", endColorstr = "rgb(225,225,225)");background-image:-moz-linear-gradient(top,#fff,#e1e1e1);background-image:-ms-linear-gradient(top,#fff,#e1e1e1);background-image:-o-linear-gradient(top,#fff,#e1e1e1);background-image:-webkit-gradient(linear,center top,center bottom,from(#fff),to(#e1e1e1));background-image:-webkit-linear-gradient(top,#fff,#e1e1e1);background-image:linear-gradient(top,#fff,#e1e1e1);-moz-background-clip:padding;-webkit-background-clip:padding-box;background-clip:padding-box;outline:0;cursor:pointer;display:block;margin:0 auto;outline:none !important;'),o(".PIER-submit-btn:active",'filter:progid: DXImageTransform.Microsoft.gradient(startColorstr = "rgb(245,245,245)", endColorstr = "rgb(215,215,215)");-ms-filter:progid: DXImageTransform.Microsoft.gradient(startColorstr = "rgb(245,245,245)", endColorstr = "rgb(215,215,215)");background-image:-moz-linear-gradient(top,#f5f5f5,#d7d7d7);background-image:-ms-linear-gradient(top,#f5f5f5,#d7d7d7);background-image:-o-linear-gradient(top,#f5f5f5,#d7d7d7);background-image:-webkit-gradient(linear,center top,center bottom,from(#fff),to(#d7d7d7));background-image:gradient(linear,center top,center bottom,from(#fff),to(#d7d7d7));background-image:-webkit-linear-gradient(top,#f5f5f5,#d7d7d7);background-image:linear-gradient(top,#f5f5f5,#d7d7d7);'),o(".PIER-bottom-text","font-size: 12px !important;"),o(".PIER-forward-reg:hover, .PIER-forward-login:hover","cursor: pointer;text-decoration: underline;"),o(".PIER-dot-line","padding-bottom: 15px;border-bottom: 1px dotted #ccc;"),o(".PIER-display-block","display: block !important;"),o(".PIER-animated","-webkit-animation-duration:1s;-moz-animation-duration:1s;-o-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;-moz-animation-fill-mode:both; -o-animation-fill-mode:both;animation-fill-mode:both;"),o(".PIERbounceOutLeft","-webkit-animation-name:PIERbounceOutLeft;-moz-animation-name:PIERbounceOutLeft;-o-animation-name:PIERbounceOutLeft;animation-name:PIERbounceOutLeft"),o(".PIERbounceInTop","-webkit-animation-name:PIERbounceInTop;-moz-animation-name:PIERbounceInTop;-o-animation-name:PIERbounceInTop;-ms-animation-name:PIERbounceInTop;animation-name:PIERbounceInTop"),o(".PIERbounceInRight","-webkit-animation-name:PIERbounceInRight;-moz-animation-name:PIERbounceInRight;-o-animation-name:PIERbounceInRight;animation-name:PIERbounceInRight"),o(".PIER-buzz-class","-webkit-animation-name:PIER-buzz-out;-moz-animation-name:PIER-buzz-out;-o-animation-name:PIER-buzz-out;-ms-animation-name:PIER-buzz-out;animation-name:PIER-buzz-out;-webkit-animation-duration:.5s;-moz-animation-duration:.5s;-o-animation-duration:.5s;-ms-animation-duration:.5s;animation-duration:.5s;-webkit-animation-timing-function:linear;-moz-animation-timing-function:linear;-o-animation-timing-function:linear;-ms-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-iteration-count:1;-moz-animation-iteration-count:1;-o-animation-iteration-count:1;-ms-animation-iteration-count:1;animation-iteration-count:1"),o(".PIER-error","font-size: 12px;color: #f34949;height: 36px;padding-top: 2px;overflow: hidden;margin-bottom: 4px;"),o(".PIER-error2","font-size: 12px;color: #f34949;"),o(".PIER-set-pin","width: 100%;height: auto;"),o(".PIER-apply-container  label","font-size: 14px !important; color: rgb(149,149,149);"),o(".PIER-apply-body .PIER-row>span","font-size: 14px ; color: #000;"),o(".PIER-split-line","border-bottom: 1px dotted #ccc;margin-top: 30px;margin-bottom: 30px;"),o(".PIER-applyresult-body","padding-bottom: 10px;border-top:1px solid #f5f5f5;"),o(".PIER-applyresult-body img","width: 70px;height: 70px;"),(isFirefox=-1!=navigator.userAgent.indexOf("Firefox"))&&(o("@-moz-keyframes PIERbounceOutLeft","0% {-moz-transform:translateX(0) }20% {opacity:1;-moz-transform:translateX(20px)}100% { opacity:0;-moz-transform:translateX(-2000px)}"),o("@-moz-keyframes PIERbounceInRight","0% {opacity:0;-moz-transform:translateX(2000px) }60% {opacity:1;-moz-transform:translateX(-30px)} 80% {-moz-transform:translateX(10px)}100% {-moz-transform:translateX(0)}"),o("@-moz-keyframes PIER-buzz-out","10% {-moz-transform: translate(4.5px, 4px) rotate(-1deg); }20% {-moz-transform: translate(-2px, 3.5px) rotate(2deg); }30% {-moz-transform: translate(-1.5px, -2.5px) rotate(1deg); }40% {-moz-transform: translate(3.5px, -3.5px) rotate(-2deg); }50% {-moz-transform: translate(-4.5px, -4px) rotate(-1deg); }60% {-moz-transform: translate(3.5px, -3.5px) rotate(-2deg); }70% {-moz-transform: translate(-1.5px, -2.5px) rotate(1deg); }80% {-moz-transform: translate(-2px, 3.5px) rotate(2deg); }90% {-moz-transform: translate(4.5px, 4px) rotate(-1deg); }0%, 100% {-moz-transform: translate(0, 0) rotate(0);  }"),o("@-moz-keyframes PIERbounceInTop","0%{opacity:0;-moz-transform:translateY(-2000px)}60%{opacity:1;-moz-transform:translateY(30px)}80%{-moz-transform:translateY(-30px)}100%{-moz-transform:translateY(0)}")),((isChrome=-1!=navigator.userAgent.indexOf("Chrome"))||(isSafari=-1!=navigator.userAgent.indexOf("Safari")))&&(o("@-webkit-keyframes PIERbounceOutLeft","0% {-webkit-transform:translateX(0)} 20% {opacity:1; -webkit-transform:translateX(20px)}100% {opacity:0;-webkit-transform:translateX(-2000px)}"),o("@-webkit-keyframes PIERbounceInRight","0% {opacity:0;-webkit-transform:translateX(2000px)}60% {opacity:1;-webkit-transform:translateX(-30px) }80% {-webkit-transform:translateX(10px)}100% { -webkit-transform:translateX(0) }"),o("@-webkit-keyframes PIER-buzz-out","10% {-webkit-transform: translate(4.5px, 4px) rotate(-1deg); }20% {-webkit-transform: translate(-2px, 3.5px) rotate(2deg); }30% {-webkit-transform: translate(-1.5px, -2.5px) rotate(1deg); }40% {-webkit-transform: translate(3.5px, -3.5px) rotate(-2deg); }50% {-webkit-transform: translate(-4.5px, -4px) rotate(-1deg); }60% {-webkit-transform: translate(3.5px, -3.5px) rotate(-2deg); }70% {-webkit-transform: translate(-1.5px, -2.5px) rotate(1deg); }80% {-webkit-transform: translate(-2px, 3.5px) rotate(2deg); }90% {-webkit-transform: translate(4.5px, 4px) rotate(-1deg); }0%, 100% {-webkit-transform: translate(0, 0) rotate(0);  }"),o("@-webkit-keyframes PIERbounceInTop","0%{opacity:0;-webkit-transform:translateY(-2000px)}60%{opacity:1;-webkit-transform:translateY(30px)}80%{-webkit-transform:translateY(-30px)}100%{-webkit-transform:translateY(0)}")),(-1!=navigator.userAgent.indexOf("MSIE")||-1!=navigator.userAgent.indexOf("Trident"))&&(o("PIERbounceOutLeft","0% {transform:translateX(0) } 20% {opacity:1;  transform:translateX(20px) } 100% {opacity:0;transform:translateX(-2000px) }"),o("PIERbounceInRight","0% {opacity:0;transform:translateX(2000px)}60% { opacity:1; transform:translateX(-30px) }80% { transform:translateX(10px) }100% {transform:translateX(0)}"),o("PIER-buzz-out","10% {transform: translate(4.5px, 4px) rotate(-1deg); }20% {transform: translate(-2px, 3.5px) rotate(2deg); }30% {transform: translate(-1.5px, -2.5px) rotate(1deg); }40% {transform: translate(3.5px, -3.5px) rotate(-2deg); }50% {transform: translate(-4.5px, -4px) rotate(-1deg); }60% {transform: translate(3.5px, -3.5px) rotate(-2deg); }70% {transform: translate(-1.5px, -2.5px) rotate(1deg); }80% {transform: translate(-2px, 3.5px) rotate(2deg); }90% {transform: translate(4.5px, 4px) rotate(-1deg); }0%, 100% {transform: translate(0, 0) rotate(0);  }"),o("PIERbounceInTop","0%{opacity:0;-ms-transform:translateY(-2000px)}60%{opacity:1;-ms-transform:translateY(30px)}80%{-ms-transform:translateY(-30px)}100%{-ms-transform:translateY(0)}")),(Opera=-1!=navigator.userAgent.indexOf("Opera"))&&(o("@-o-keyframes PIERbounceOutLeft","0% { -o-transform:translateX(0)}20% {opacity:1;-o-transform:translateX(20px)}100% { opacity:0; -o-transform:translateX(-2000px)}"),o("@-o-keyframes PIERbounceInRight","0% {opacity:0;-o-transform:translateX(2000px)}60% {opacity:1;-o-transform:translateX(-30px)}80% {-o-transform:translateX(10px)}100% {-o-transform:translateX(0)}"),o("@-o-keyframes PIER-buzz-out","10% {-o-transform: translate(4.5px, 4px) rotate(-1deg); }20% {-o-transform: translate(-2px, 3.5px) rotate(2deg); }30% {-o-transform: translate(-1.5px, -2.5px) rotate(1deg); }40% {-o-transform: translate(3.5px, -3.5px) rotate(-2deg); }50% {-o-transform: translate(-4.5px, -4px) rotate(-1deg); }60% {-o-transform: translate(3.5px, -3.5px) rotate(-2deg); }70% {-o-transform: translate(-1.5px, -2.5px) rotate(1deg); }80% {-o-transform: translate(-2px, 3.5px) rotate(2deg); }90% {-o-transform: translate(4.5px, 4px) rotate(-1deg); }0%, 100% {-o-transform: translate(0, 0) rotate(0);  }"),o("@-o-keyframes PIERbounceInTop","0%{opacity:0;-o-transform:translateY(-2000px)}60%{opacity:1;-o-transform:translateY(30px)}80%{-o-transform:translateY(-30px)}100%{-o-transform:translateY(0)}"))},setUser:function(t){if("object"==typeof t)for(var e in t)R.hasOwnProperty(e)&&(R[e]=t[e])},getUser:function(){return R},setConfig:function(t,e){if("object"==typeof t&&"object"==typeof e){for(key in e)t.hasOwnProperty(key)||(t[key]=e[key]);return t}throw new Error(P.paramError)},notEmpty:function(t){var e=t,r="";if("object"!=typeof e)throw new Error("参数错误！");for(var a in e)if(""==e[a]||void 0==e[a]||null==e[a])return r=a+"不能为空";return r},isUndefined:function(t){return void 0===t||""===t?!0:!1},isArray:function(t){return Array.isArray(t)},filter:function(t,e,r){if("currency"===t){var a="";switch(r){default:a='<span class="PIER-font-sm">￥</span>'+e}return a}},trim:function(t){if("string"!=typeof t)throw new Error("trim 方法参数错误");return t.replace(/(^\s*)|(\s*$)/g,"")},digitalInputListener:function(t){var e=t.srcElement?t.srcElement:t.target;console.log("input",e.value);var r=e.value;if("undefined"!=typeof r&&r.length>0){var a=r.replace(/[^0-9]/g,"");t.srcElement.value=a}},timer:function(t){if("object"==typeof t){var e,r=t.html();console.log("btnText",r);var a=60;NaN===parseFloat(r)&&(r=a,t.html(r));var n=function(){a-=1,0==a?(t.html(P.reSend),clearInterval(e)):t.html(a)};n(),e=setInterval(n,1e3)}},isOri:function(t){return t.split(u).length>1},extend:function(t,e){return function(){return t.apply(e,arguments)}},switchPanel:function(t){var e=t.type,r=t.origin,a=t.target;if(e===I.rightInLeftOut&&(r.addClass(["PIER-animated","PIER-display-block","PIERbounceOutLeft"]),a.addClass(["PIER-animated","PIER-display-block","PIERbounceInRight"]),r.destory(10),p.appendChild(a)),e===I.filp){var n=t.direction;"fromFront"===n&&(setTimeout(function(){r.addClass("PIER-login-container-back"),a.addClass("PIER-reg-container-back")},10),p.appendChild(a)),"fromBack"===n&&(r.removeClass("PIER-reg-container-back"),a.removeClass("PIER-login-container-back"),r.destory())}},createElem:function(t,r){var a=e.createElement(t);return a.addClass=function(t){if("object"==typeof t)for(var e in t)if(this.classList)this.classList.add(t[e]);else{a.className.split(" ");a.className+=" "+t[e]}if("string"==typeof t)if(this.classList)this.classList.add(t);else{a.className.split(" ");a.className+=" "+t}},a.removeClass=function(t){if("object"==typeof t)if(this.classList)for(var e in t)this.classList.remove(t[e]);else{var r="",n=a.className.split(" ");for(var e in t);}if("string"==typeof t)if(this.classList)this.classList.remove(t);else{var n=a.className.split(" "),r="";for(var e in n)n[e]!==t&&(r+=" "+n[e]);a.className=r}},a.setAttrs=function(t){if("object"==typeof t)for(var e in t)this.setAttribute(e,t[e])},a.getAttr=function(t){return""!=t&&void 0!=t?_elemTemp.getAttribute(t):void 0},a.appendChildren=function(t){if("object"==typeof t){for(var e in t)this.appendChild(t[e]);return this}},a.contains=function(t){if("string"==typeof t){if(a.classList)return a.classList.contains(t)?!0:!1;var e=a.className.split(" "),r=!1;for(var n in e)e[n]==t&&(r=!0);return r}},a.css=function(t){if("object"==typeof t){for(var e in t)a.style[e]=t[e];console.log(" _this.style",a.style)}},a.destory=function(t){setTimeout(function(){console.log("this.parentNode",a.parentNode),a.parentNode.removeChild(a)},t||500)},a.val=function(t){return void 0===t||""===t||null===t?this.value:void(this.value=t)},a.html=function(t){return void 0===t||null===t?this.innerHTML:void(this.innerHTML=t)},a.bind=function(t,r,a){"undefined"!=typeof e.addEventListener?this.addEventListener(t,r,a||!1):this.attachEvent(t,r)},a.unbind=function(t,r){"undefined"!=typeof e.addEventListener?this.removeEventListener(t,r):this.detachEvent(t,r)},""!=r&&void 0!=r&&a.addClass(r),a},destorySDK:function(){e.body.removeChild(d),e.body.removeChild(s)},initPierBtn:function(t){return i=v.createElem("div",["pier-payment-btn"]),i.html('<img  src="http://pierup.cn/images/pierlogo38.png" style="width:24px;margin-top:4px;margin-left:10px;margin-right:6px;float:left;"><div style="font-size:14px;margin-top:10px;margin-left:50px;">品而付</div>'),t?t.parentNode.appendChild(i):e.body.appendChild(i),i},initHeader:function(t){var e=v,r=e.extend(e.createElem,e),a=!1;t&&(a=t.payResult||!1);var n=r("div","PIER-panel-head"),o=r("table"),i=r("tr"),d=r("td"),s=r("div","PIER-close");return i.html('<td ></td><td ><div><img src="'+t.logo+'"></div><h4>'+t.wording+"</h4></td>"),n.appendChild(o),o.appendChild(i),i.appendChild(d),d.appendChild(s),s.bind("click",function(){t.errorObj&&t.errorObj.parentNode.contains("PIER-h-auto")&&t.errorObj.parentNode.removeClass("PIER-h-auto"),a?e.destorySDK():(p.removeClass("PIER-buzz-class"),setTimeout(function(){t.errorObj.html()==P.exitTip?e.destorySDK():(p.addClass("PIER-buzz-class"),t.errorObj.html(P.exitTip),setTimeout(function(){t.errorObj.html("")},5e3))},10))}),n},initPinSettingPanel:function(t){var e=v,r=e.extend(e.createElem,e),a=r("div","PIER-set-pin"),n=r("div","PIER-split-line"),o=r("div",["PIER-row","PIER-font-sm","PIER-color-black"]);o.html("<p>设置品而金融支付密码以保障支付安全</p>");var i=r("div","PIER-row"),d=r("input","PIER-comm-input");d.setAttrs({placeholder:"设置支付密码",type:"password",maxlength:"6"}),i.appendChild(d);var s=r("div",["PIER-row","PIER-mT-sm"]),p=r("input","PIER-comm-input");p.setAttrs({placeholder:"确认支付密码",type:"password",maxlength:"6"}),s.appendChild(p);var l=r("div",["PIER-row","PIER-error2","PIER-text-center"]),m=r("p");m.html(""),l.appendChild(m);var c=r("div",["PIER-row","PIER-mT-sm","PIER-mB-sm"]),f=r("button",["PIER-submit-btn","PIER-color"]);f.html("申请品而信用"),c.appendChild(f);var h=function(){var t=e.trim(d.val());if(""===t||void 0===t)m.html("支付密码不能为空！");else if(t.length<6)m.html("支付密码应该由6位数字组成！");else{var r=t.replace(/[^0-9]/g,"");r!=t&&m.html("支付密码只能由数字组成！")}},g=function(){var t=e.trim(d.val()),r=e.trim(p.val());t!==r&&m.html("两次输入的支付密码不匹配！")};return d.addEventListener("change",h),f.bind("click",function(){m.html(""),h(),""===m.html()&&(g(),""===m.html()&&t.call(this,d.val()))}),a.appendChildren([n,o,i,s,l,c]),a},initLoadingBody:function(){var t=v,e=t.extend(t.createElem,t),r=e("div","PIER-loading-body"),a=e("img");return a.setAttrs({src:"/images/loading_page.gif"}),r.appendChild(a),r},initLogin:function(){var t=v,e=t.extend(t.createElem,t);l=e("div","PIER-login-container");var r=e("div","PIER-login-body"),a=e("div",["PIER-row","PIER-error","PIER-text-center"]),o=e("span","errorMsg");a.appendChild(o);var i=t.initHeader({errorObj:o,logo:n.merchantLogo,wording:n.order_desc}),d=e("div",["PIER-row","PIER-text-center"]),c=e("button",["PIER-switch-btn","active","left-btn"]);
c.html("使用信用"),applyBtn=e("button",["PIER-switch-btn","right-btn"]),applyBtn.html("申请信用"),d.appendChildren([c,applyBtn]);var h=e("div",["PIER-row","PIER-mT-md"]),g=e("input","PIER-comm-input");g.setAttrs({placeholder:P.phoneInputTip,maxlength:"11"}),h.appendChild(g);var u=e("div",["PIER-row","PIER-mT-sm"]),R=e("input","PIER-comm-input");R.setAttrs({placeholder:P.pwdInputTip,type:"password"}),u.appendChild(R);var x=e("div",["PIER-row","PIER-mT-sm"]);submitBtn=e("button","PIER-submit-btn"),submitBtn.setAttrs({id:"pierLogin"}),submitBtn.html(P.next),x.appendChild(submitBtn),s.appendChild(p),p.appendChild(l),l.appendChildren([i,r]),r.appendChildren([a,d,h,u,x]),submitBtn.bind("click",function(){var e=g.val(),r=R.val();if(o.html(t.notEmpty({"手机号":e,"密码":r})),a.contains("PIER-h-auto")&&a.removeClass("PIER-h-auto"),""==o.html()){var n=b.hostName+b.signIn,i={phone:e,password:r};t.http({url:n,body:i},function(e){console.log("user login success",e),t.setUser({session_token:e.session_token,user_id:e.user_id,status_bit:e.status_bit}),t.initConfirm(),t.switchPanel({origin:l,target:m,type:I.rightInLeftOut})},function(t){console.log("user login failed",t),o.html(t.message),("1008"===t.code||"2009"===t.code)&&a.addClass("PIER-h-auto")})}}),applyBtn.bind("click",function(){t.initReg(),t.switchPanel({origin:l,target:f,type:I.filp,direction:"fromFront"})})},initPay:function(t,e){var r=v,a=r.extend(r.createElem,r),n=a("div","PIER-set-pin"),o=a("div","PIER-split-line"),i=a("div",["PIER-row","PIER-mT-sm","PIER-font-xs"]),d=a("p");d.html("借记卡（中国银行 尾号为0003）绑定的手机号为：186****123"),i.appendChild(d);var s=a("div",["PIER-row","PIER-font-xs"]);s.setAttrs({style:"height:38px;"});var p=a("input","PIER-code-input");p.setAttrs({placeholder:"借记卡验证码"});var l=a("button",["PIER-font-xs","PIER-code-label"]);l.html(P.sendCode),s.appendChildren([p,l]);var m=a("div",["PIER-row","PIER-font-xs","PIER-mT-xs"]),c=a("input",["PIER-comm-input","PIER-clear"]);c.setAttrs({placeholder:"品而金融6位支付密码",type:"password",maxlength:"6"}),m.appendChild(c);var f=a("div",["PIER-row","PIER-mT-md"]),h=a("button",["PIER-submit-btn"]);return h.html("确认并付款"),f.appendChild(h),h.bind("click",function(){r.trim(c.val()),r.trim(p.val());t===x.credit,t===x.bankCard,t===x.mixed,e.call(this,payresult=!0)}),t===x.credit&&n.appendChildren([o,m,f]),t===x.bankCard&&n.appendChildren([o,i,s,f]),t===x.mixed&&n.appendChildren([o,i,s,m,f]),n},initConfirm:function(){var t=v,e=t.extend(t.createElem,t);m=e("div","PIER-payment-container");var r=e("div",["PIER-payment-body","PIER-text-left"]),a=e("div",["PIER-row","PIER-error","PIER-text-center"]);eroSpan=e("span","errorMsg"),a.appendChild(eroSpan);var o=t.initHeader({errorObj:eroSpan,logo:n.merchantLogo,wording:n.order_desc}),i=e("div",["PIER-row","PIER-mT-xs"]);i.html("<label>"+P.pierCreditAmount+"</label>");var d=e("span",["PIER-right","PIER-money"]);i.appendChild(d);var s=e("div",["PIER-row","PIER-mT-xs"]);s.html("<label>分期选项</label>");var p=e("select",["PIER-right","PIER-instalment-select"]),l=e("option");l.html("不分期"),l.setAttrs({value:"0"}),p.appendChild(l),s.appendChild(p);var f=e("div",["PIER-row","PIER-mT-xs","PIER-dot-line"]),h=e("input");h.setAttrs({type:"checkbox"});var g=e("span","PIER-bottom-text");g.html(P.agreeAndRead);var u=e("span","PIER-color");u.html(P.baomixieyi),g.appendChild(u),f.appendChild(h),f.appendChild(g);var R=e("div",["PIER-row","PIER-mT-sm","PIER-dot-line"]),E=e("select","PIER-bankcard-select");R.appendChild(E);var y=e("span",["PIER-right","PIER-money"]);R.appendChild(y);var w=e("div",["PIER-row","PIER-mT-sm"]);w.html("<label>商品总价</label>");var k=e("span",["PIER-right","PIER-money"]);w.appendChild(k);var C=e("div",["PIER-row"]);C.setAttrs({style:"height:60px;"});var A=e("div",["PIER-right","PIER-font-sm"]);A.html("美元共计：￥812.33");var T=e("div",["PIER-right","PIER-font-xs","PIER-color-gray","PIER-mT-xs"]);T.html("中国银行上海分行：2015-12-18 10:15");var z=e("div",["PIER-right","PIER-font-xs","PIER-color-gray"]),O=e("br");z.html("汇率：1USD = 6.47RMB"),C.appendChildren([T,O,z]);var L=e("div",["PIER-row","PIER-mT-md"]),U=e("button",["PIER-submit-btn"]);U.html("下一步"),L.appendChild(U);var X=e("div",["PIER-row","PIER-mT-md"]),N=e("p",["PIER-bottom-text","PIER-text-center"]);N.html("您可以在4分12秒内使用额度支付"),X.appendChild(N);var Y=t.initLoadingBody();m.appendChildren([o,Y]);var S="",_=1,B=0,F=(function(){var a=b.hostName+b.savePaymentOrder,o={merchant_id:n.merchant_id,no_order:n.order_id,money_order:n.amount,name_goods:n.order_desc,sign_type:"RSA",api_key:n.api_key,user_id:n.user_id,dt_order:"20160108113511",valid_order:n.available_time};t.http({url:a,body:o},function(a){console.log("user save order success",a),t.isUndefined(a.payment_type)||(_=a.payment_type),F(_),t.isUndefined(a.credit_amount)||(d.html(t.filter("currency",parseFloat(a.credit_amount).toFixed(2),"CNY")),B+=parseFloat(a.credit_amount)),t.isUndefined(a.card_amount)||(y.html(t.filter("currency",parseFloat(a.card_amount).toFixed(2),"CNY")),B+=parseFloat(a.card_amount)),S=a.trans_id,k.html(t.filter("currency",B.toFixed(2),"CNY"));var n;if(t.isArray(a.iterms)){n=a.iterms;for(var o=0;o<n.length;o++){var i=e("option");i.html(n[o].term+"期(每期利率为"+n[o].rate+"%)"),i.setAttrs({value:n[o].id}),p.appendChild(i)}}var s;if(t.isArray(a.cards)){s=a.cards;for(var o=0;o<s.length;o++){var l=s[o].card_no.split("*")[s[o].card_no.split("*").length-1],i=e("option");i.html("借记卡支付金额");var c=e("span");c.html("（"+s[o].bank_name+" 尾号"+l+"）"),i.appendChild(c),E.appendChild(i)}}m.removeChild(Y),m.appendChild(r)},function(t){})}(),function(t){t===x.credit&&r.appendChildren([a,i,s,f,w,C,L,X]),t===x.bankCard&&r.appendChildren([a,R,w,C,L,X]),t===x.mixed&&r.appendChildren([a,i,s,f,R,w,C,L,X])});U.bind("click",function(){if(!h.checked)return void h.focus();var e=t.initPay(_,function(){t.initPayRst(),t.switchPanel({origin:m,target:c,type:I.rightInLeftOut})});r.removeChild(L),r.removeChild(X),r.appendChildren([e,X])})},initPayRst:function(){var t=v,e=t.extend(t.createElem,t);c=e("div","PIER-payresult-container");var r=t.initHeader({payResult:!0,logo:n.merchantLogo,wording:n.order_desc}),a=e("div",["PIER-payresult-body","PIER-text-center"]),o=e("div",["PIER-row","PIER-mT-md"]),i=e("img");i.setAttrs({src:"http://pierup.cn/images/getqrcode.jpg"}),o.appendChild(i);var d=e("div",["PIER-row","PIER-mT-md"]);d.html('<p class="PIER-color">支付成功!</p>');var s=e("div",["PIER-row","PIER-mT-md"]);s.html("<p>马上在各大市场下载品而金融APP，轻松提高和管理您的额度!</p>");var p=e("div",["PIER-row","PIER-mT-md"]);p.html('<p class="PIER-color-gray PIER-font-sm">正在返回商家……</p>'),a.appendChildren([o,d,s,p]),c.appendChildren([r,a])},initReg:function(){var t=v,e=t.extend(t.createElem,t);f=e("div","PIER-reg-container");var r=e("div","PIER-reg-body"),a=e("div",["PIER-row","PIER-error","PIER-text-center"]);eroSpan=e("span","errorMsg"),a.appendChild(eroSpan);var n=t.initHeader({errorObj:eroSpan,logo:P.pierLogo,wording:'品而额度申请<span class="PIER-color">1/2</span>'}),o=e("div",["PIER-row","PIER-text-center"]),i=e("button",["PIER-switch-btn","left-btn"]);i.html("使用信用");var d=e("button",["PIER-switch-btn","active","right-btn"]);d.html("申请信用"),o.appendChildren([i,d]);var s=e("div",["PIER-row","PIER-mT-md"]);phoneInput=e("input","PIER-comm-input"),phoneInput.setAttrs({placeholder:"手机号",maxlength:"11"}),s.appendChild(phoneInput);var p=e("div",["PIER-row","PIER-mT-sm"]),m=e("input","PIER-code-input");m.setAttrs({placeholder:"短信验证码"}),codeBtn=e("button",["PIER-font-xs","PIER-code-label"]),codeBtn.html(P.sendCode),p.css({height:"32px"}),p.appendChildren([m,codeBtn]);var c=e("div",["PIER-row","PIER-mT-sm"]);nameInput=e("input","PIER-comm-input"),nameInput.setAttrs({placeholder:"真实姓名",maxlength:"18"}),c.appendChild(nameInput);var g=e("div",["PIER-row","PIER-mT-sm"]);idInput=e("input","PIER-comm-input"),idInput.setAttrs({placeholder:"身份证"}),g.appendChild(idInput);var u=e("div",["PIER-row","PIER-mT-xs"]),R=e("input");R.setAttrs({type:"checkbox"});var x=e("span",["PIER-bottom-text"]);x.html('同意<span class="PIER-color">《品而服务协议》</span>和<span class="PIER-color">《保密授权协议》</span>'),u.appendChildren([R,x]);var E=e("div",["PIER-row","PIER-mT-sm","PIER-mB-sm"]);submitBtn=e("button","PIER-submit-btn"),submitBtn.html(P.next),E.appendChild(submitBtn),r.appendChildren([a,o,s,p,c,g,u,E]),f.appendChildren([n,r]),i.bind("click",function(){t.switchPanel({origin:f,target:l,type:I.filp,direction:"fromBack"})}),submitBtn.bind("click",function(){var e=phoneInput.val(),r=nameInput.val(),a=idInput.val(),n=m.val();if(eroSpan.html(t.notEmpty({"手机号":e,"验证码":n,"姓名":r,"银行卡号":a})),""===eroSpan.html()){if(!R.checked)return void R.focus();var o=b.hostName+b.regUser,i={phone:e,name:r,id_number:a,activation_code:n},d=submitBtn,s=d.html();d.html(P.btnLoading),t.http({url:o,body:i},function(e){console.log("reg user success",e),t.setUser({user_id:e.user_id,session_token:e.session_token,status_bit:e.status_bit,name:r}),t.initApply(),t.switchPanel({origin:f,target:h,type:I.rightInLeftOut})},function(t){d.html(s),eroSpan.html(t.message)})}}),codeBtn.bind("click",function(){var e=phoneInput.val();if(e.match(/\d{11,11}/)&&(codeBtn.html()===P.sendCode||codeBtn.html()===P.reSend)){var r=b.hostName+b.regCode,a={phone:e},n=codeBtn;eroSpan.html("");var o=n.html();n.html(P.btnLoading2),t.http({url:r,body:a},function(e){n.html(o),console.log("get reg code success",e),t.timer(codeBtn)},function(t){n.html(o),eroSpan.html(t.message),console.log("get reg code failed",t)})}})},initApply:function(){var t=v,e=t.extend(t.createElem,t),r=t.getUser();h=e("div","PIER-apply-container");var a=e("div","PIER-apply-body"),n=e("div",["PIER-row","PIER-error","PIER-text-center"]),o=e("p");n.appendChild(o);var i=t.initHeader({errorObj:o,logo:P.pierLogo,wording:'品而额度申请<span class="PIER-color">2/2</span>'}),d=e("div",["PIER-row","PIER-mT-sm"]),s=e("label");s.html("持卡人：");var p=e("span","PIER-right");p.html(r.name||""),d.appendChildren([s,p]);var l=e("div",["PIER-row","PIER-mT-xs"]),m=e("input","PIER-comm-input");m.setAttrs({placeholder:"借记卡卡号"}),l.appendChild(m);var c=e("div",["PIER-row","PIER-mT-sm"]),f=e("label");f.html("卡类型：");var u=e("span","PIER-right");u.html("中国银行"),c.appendChildren([f,u]);var R=e("div",["PIER-row","PIER-mT-xs"]),x=e("input","PIER-comm-input");x.setAttrs({placeholder:"银行预留手机号"}),R.appendChild(x);var E=e("div",["PIER-row","PIER-mT-xs"]),y=e("input");y.setAttrs({type:"checkbox"});var w=e("span","PIER-bottom-text");w.html('同意<span class="PIER-color">《品而服务协议》</span>和<span class="PIER-color">《保密授权协议》</span>'),E.appendChildren([y,w]);var k=e("div",["PIER-row","PIER-mT-sm"]);k.css({height:"32px"});var C=e("input","PIER-code-input");C.setAttrs({placeholder:"短信验证码"});var A=e("button",["PIER-font-xs","PIER-code-label"]);A.html(P.sendCode),k.appendChildren([C,A]);var T=e("div",["PIER-row","PIER-mT-sm","PIER-mB-sm"]),z=e("button",["PIER-submit-btn","PIER-color"]);z.html("确认"),T.appendChild(z);var O="",L="";A.bind("click",function(){var e=m.val(),r=x.val();if(o.html(t.notEmpty({"银行卡号":e,"预留手机号":r})),""===o.html()){if(!y.checked)return void y.focus();var a=b.hostName+b.bindCard,n={card_no:e,bind_mob:r},i=A,d=i.html();i.html(P.btnLoading2),t.http({url:a,body:n},function(e){console.log("bind card success",e),i.html(d),O=e.token,L=e.card_id,t.timer(A)},function(t){console.log("bind card failed",t),i.html(d),o.html(t.message)})}}),z.bind("click",function(){var e=C.val(),r="";if(o.html(t.notEmpty({"短信验证码":e})),""===o.html()){if(""===O||""===L)return void o.html("请先填写正确的验证码");var n=b.hostName+b.verifyCard,i={token:O,verify_code:e,bind_purpose:2,card_id:L},d=z,s=d.html();d.html(P.btnLoading),t.http({url:n,body:i},function(e){console.log("verify card success",e),r=e.token;var n=t.initPinSettingPanel(function(e){console.log("pin code ",e);var a=b.hostName+b.setPin,n={new_payment_password:e,payment_password_token:r};t.http({url:a,body:n},function(e){console.log("set pin success",e),t.initApplyRst(),t.switchPanel({origin:h,target:g,type:I.rightInLeftOut})},function(t){console.log("set pin failed",t),o.html(t.message)})});z.parentNode.removeChild(z),a.appendChild(n)},function(t){d.html(s),console.log("verify card failed",t),o.html(t.message)})}}),a.appendChildren([n,d,l,c,R,E,k,T]),h.appendChildren([i,a])},initApplyRst:function(){var t=v,e=t.extend(t.createElem,t);g=e("div","PIER-applyresult-container");var r=t.initHeader({payResult:!0,logo:P.pierLogo,wording:"品而付额度申请"}),a=e("div",["PIER-applyresult-body","PIER-text-center"]),o=t.initLoadingBody();g.appendChildren([r,o]);(function(){var r=b.hostName+b.applyCredit,i={merchant_id:n.merchant_id};t.http({url:r,body:i},function(r){var n=r.credit_limit,i=e("div",["PIER-row","PIER-mT-sm"]);i.html('<img src="/images/approval.png">');var d=e("div",["PIER-row","PIER-font-sm"]);d.html('<p>申请成功!</p><p style="margin-top:-10px;">您的初步信用额度为：</p>');var s=e("div",["PIER-row","PIER-mT-sm"]),p=e("span",["PIER-money","PIER-font-lg"]);p.html(t.filter("currency",n,"CNY")),s.appendChild(p);var l=e("div","PIER-row");l.html('<p class="PIER-font-xs PIER-color-gray">新用户注册专用金额，仅限于此次消费</p>');var c=e("div",["PIER-row","PIER-mT-sm"]),f=e("button",["PIER-submit-btn","PIER-color"]),h=e("p","PIER-font-xs");f.html("使用额度付款"),h.html("*若订单金额超出信用额度，不足部分可以用借记卡支付"),c.appendChildren([f,h]),a.appendChildren([i,d,s,l,c]),g.removeChild(o),g.appendChild(a),f.bind("click",function(){t.initConfirm(),t.switchPanel({origin:g,target:m,type:I.rightInLeftOut})})},function(r){var n=r.message,i=e("div",["PIER-row","PIER-mT-sm"]);i.html('<img src="/images/approval.png">');var d=e("div",["PIER-row","PIER-font-sm"]);d.html("<p>"+n+"</p>");var s=e("table","PIER-font-sm");s.css({margin:"0 auto"}),s.html('<tr><td>您仍可以使用</td><td><img src="/images/tab-union.png" style="width:40px;height:40px;" /></td><td>借记卡完成支付</td></tr>');var p=e("div",["PIER-row","PIER-mT-md","PIER-mB-md"]),l=e("button",["PIER-submit-btn","PIER-color"]);l.html("去支付"),p.appendChild(l),a.appendChildren([i,d,s,p]),g.removeChild(o),g.appendChild(a),l.bind("click",function(){t.initConfirm(),t.switchPanel({origin:g,target:m,type:I.rightInLeftOut})})})})()},http:function(){var e=v,r=(e.extend(e.createElem,e),e.getUser()),a=null,n=arguments[0],o=arguments[1],i=arguments[2];if(n.body.session_token=r.session_token,n.body.user_id=r.user_id,t.XMLHttpRequest)a=new XMLHttpRequest;else{if(!t.ActiveXObject)throw new Error(BROWSER_NOT_SUPPORT);a=new ActiveXObject("Microsoft.XMLHTTP")}a.open("POST",n.url,!0),a.setRequestHeader("Content-type","application/json"),a.onreadystatechange=function(){if(4==a.readyState){var t=JSON.parse(a.response);"200"==t.code?(o.call(this,t.result),(""!==t.result.session_token||void 0!==t.result.session_token)&&e.setUser({session_token:t.result.session_token}),(""!==t.result.status_bit||void 0!==t.result.status_bit)&&e.setUser({status_bit:t.result.status_bit})):(console.error("error",t),i.call(this,t))}},a.send(JSON.stringify(n.body))},loadingSDK:function(t){var r=v,a=r.extend(r.createElem,r),n=(t.src,r.initPierBtn(t));n.bind("click",function(){d=a("div","PIER-overlay"),s=a("div","PIER-flip-wrap"),p=a("div",["PIER-flip-container","PIER-animated","PIERbounceInTop"]),r.initLogin(),e.body.appendChild(d),e.body.appendChild(s)})}},y=this.PIER={version:"0.1.0"};y.initSDK=function(){var t=v;t.extend(t.createElem,t);t.init(),n=t.setConfig(arguments[0],E),o=arguments[1];var r=e.querySelector("script[class='pier-button']");console.log("_pierScriptBtn",r.src),t.loadingSDK(r)}}(window,document);